@startuml
title Process Payment

actor User
participant "payment.html" as Frontend
participant "PaymentController" as Controller
participant "PaymentService" as Service
participant "PaymentDAO" as DAO
participant "Database" as DB

User -> Frontend : Submit payment\n{orderId, amount, paymentStatus, paymentDate}
Frontend -> Controller : POST /payment/process\norderId, amount, paymentStatus, paymentDate
Controller -> Service : processPayment(orderId, amount, paymentStatus, paymentDate)
Service -> DAO : insertPayment(orderId, amount, paymentStatus, paymentDate)

alt Payment Processed Successfully
    DAO -> DB : INSERT INTO Payments\n(orderId, amount, paymentStatus, paymentDate)
    DB -> DAO : paymentId
    DAO -> Service : paymentId
    Service -> Controller : paymentId
    Controller -> Frontend : 200 OK\n"Payment processed"\n{paymentId, orderId, amount, paymentStatus, paymentDate}
    Frontend -> User : Show payment confirmation

else Server Error
    DAO -> DB : INSERT INTO Payments
    DB --> DAO : DB error
    DAO --> Service : error: server issue
    Service --> Controller : error: server issue
    Controller --> Frontend : 500 Internal Server Error\n"Payment failed"
    Frontend --> User : Show error message

end
@enduml
